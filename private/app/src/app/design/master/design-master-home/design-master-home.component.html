<div id="grid-container">
    <section id="navigation">
        <app-navigation></app-navigation>
    </section>

    <section id="selection">
        <app-tile
            [hasDivider]="false"
        >
            <div tile-header>
                All Master Data
            </div>
            <div tile-content>
                Select to edit
            </div>
        </app-tile>
        <div class="scrollable">
            <app-tile
                [isSelected]="selectedTileId ===  '__select_master_data_overview'" 
                (click)="selectMasterData('__select_master_data_overview')"
                [isSelectable]="true"
                [hasDivider]="false"
            >
                <div tile-content>
                    Master Data Overview
                </div>
            </app-tile>
            <app-tile *ngFor="let masterDataElement of dbMasterDataOverviewData" 
                [isSelected]="isTileSelected(masterDataElement._id)"
                (click)="selectMasterData(masterDataElement._id)"
                [isSelectable]="true"
                [hasDivider]="false"
            >
                <div tile-content>
                    {{ masterDataElement.display_name || masterDataElement._id }}
                </div>
            </app-tile>
        </div>
    </section>

    <section id="activity">
        <ng-container [ngSwitch]="selectedMasterDataId">

            <ng-container *ngSwitchCase="'__select_master_data_overview'">
                <ng-container *ngTemplateOutlet="masterDataOverviewTable"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="'__add_new_master_data_type'">
                <app-design-master-add-new 
                    (apiResponse)="handleApiResponse($event)"
                    (tableDataEmitter)="handleTableDataResponse($event)"
                ></app-design-master-add-new>
            </ng-container>
            <!-- Specific Master Data Type selected -->
            <ng-container *ngSwitchDefault> 
                <app-design-master-edit 
                (apiResponse)="handleApiResponse($event)" 
                (tableDataEmitter)="handleTableDataResponse($event)"
                [masterDataId]="selectedMasterDataId"
            ></app-design-master-edit>

            </ng-container>
        </ng-container>
    </section>

    <section id="preview">
        <!-- <ng-container [ngSwitch]="selectedMasterDataId">
            <ng-container *ngSwitchCase="'__select_master_data_overview'">
                <ng-container *ngTemplateOutlet="selectMasterDataPlaceholder"></ng-container>
            </ng-container>
            <ng-container *ngSwitchCase="'__add_new_master_data_type'">
                <app-table [tableData]="previewTableData"></app-table>
            </ng-container>
            <ng-container *ngSwitchDefault> 
                <ng-container *ngIf="selectedMasterDataObject; then masterDataPreviewTable">
                </ng-container>
            </ng-container>
        </ng-container> -->
        <app-preview-section>
            hello
        </app-preview-section>

    </section>
</div>

<!-- NOTE: The following code should not be placed inside *ngIf="sidebarOpen" because if so, 
it will be newly created on toggle and the transition will not happen -->
<div [class.sidebar-open]="isSidebarOpen" class="sidebar">
    sidebar content
</div>
<div class="sidebar-overlay" [class.sidebar-open-overlay]="isSidebarOpen" (click)="toggleSidebar()"></div>
<app-notification [notifications]="notifications" [dismissalTime]="dismissalTime" (notificationDismissed)="onNotificaitonDismissed($event)"></app-notification>

<ng-template #masterDataOverviewTable>
    <app-tile
        [hasDivider]="false"
    >
        <div tile-header>
            Master Data Overview
        </div>
        <div tile-content>
            This is an overview of all Master Data. Click to edit
        </div>
    </app-tile>
    <div class="horizontal-bar">
        <div class="horizontal-bar-item">
            <input type="text" placeholder="Search..." (keyup)="applyFilter($event)" #input/>
        </div>
        <div class="horizontal-bar-item stick-to-right">
            <button class="primary" (click)="selectMasterData('__add_new_master_data_type')">Add New</button>
        </div>
    </div>
    <div class="scrollable">
        <app-table [tableData]="masterDataOverviewTableData"></app-table>
    </div>
    <div>
        <button>hi NY!</button>
    </div>
</ng-template>

<ng-template #masterDataPreviewTable>
    @if (selectedMasterDataObject) {
        @if (selectedMasterDataObject.display_name) {
            {{ selectedMasterDataObject.display_name }}

        } 
        @else {
            {{ selectedMasterDataObject._id }}
        }
    }
    <app-table [tableData]="previewTableData"></app-table>
</ng-template>

<ng-template #selectMasterDataPlaceholder>
    <p>Please Select Master Data</p>
</ng-template>